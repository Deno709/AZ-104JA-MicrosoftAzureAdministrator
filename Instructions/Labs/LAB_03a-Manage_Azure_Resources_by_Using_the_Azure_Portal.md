---
lab:
    title: '03a - Azure portal を使用して Azure リソースを管理する'
    module: 'モジュール 03 - Azure 管理'
---

# ラボ 03a - Azure portal を使用して Azure リソースを管理する
# 受講者用ラボ マニュアル

## ラボ シナリオ

リソースのプロビジョニング、およびリソース グループ間でのリソースの移動など、リソース グループに基づいたリソースの整理に関連する基本的な Azure 管理機能を探索する必要があります。また、パフォーマンスの特性とサイズの変更を可能にしながらも、ディスク リソースが誤って削除されないように保護するオプションも検討する必要があります。

## 目標

このラボでは、次の操作を行います。

+ タスク 1: リソース グループを作成し、リソース グループにリソースをデプロイする
+ タスク 2: リソース グループ間でリソースを移動する
+ タスク 3: リソース ロックを実装してテストする

## 予想時間: 20分間

## 指示

### 演習 1

#### タスク 1: リソース グループを作成し、リソース グループにリソースをデプロイする

このタスクでは、Azure portal を使用してリソース グループを作成し、リソース グループにディスクを作成します。

1. [Azure portal](https://portal.azure.com) にログインします。

1. 「**リソース グループ**」を検索して選択します。 

1. 「**リソース グループ**」 ブレードで、「**+ 追加**」 をクリックし、次の設定でリソース グループを作成します。

    |設定|値|
    |---|---|
    |サブスクリプション| このラボで使用する Azure サブスクリプションの名前 |
    |リソース グループ| **az104-03a-rg1**|
    |リージョン| このラボで使用するサブスクリプションで使用できる Azure リージョンの名前 |

1. 「**確認および作成**」 をクリックしてから、「**作成**」 をクリックします。

1. Azure portal で、「**ディスク**」を検索して選択し、「**+ 追加**」 をクリックして、次の設定を指定します。

    |設定|値|
    |---|---|
    |サブスクリプション| リソース グループを作成した Azure サブスクリプションの名前 |
    |リソース グループ| **az104-03a-rg1** |
    |ディスク名| **az104-03a-disk1** |
    |リージョン| リソース グループを作成した Azure リージョンの名前 |
    |可用性ゾーン| **なし** |
    |ソース タイプ| **なし** |

    >**注**: リソースを作成するときに、新しいリソース グループを作成するか、既存のリソース グループを使用するかのいずれかを選ぶことができます。

1. 記憶域の種類とサイズをそれぞれ **Standard HDD** と **32 GiB** に変更します。

1. 「**確認および作成**」 をクリックしてから、「**作成**」 をクリックします。

    >**注**: ディスクが作成されるまで待ちます。これには 1 分もかかりません。

#### タスク 2: リソース グループ間でリソースを移動する 

このタスクでは、前のタスクで作成したディスク リソースを新しいリソース グループに移動します。 

1. 「**リソース グループ**」を検索して選択します。 

1. **リソース グループ** ブレードで、前のタスクで作成した **az104-03a-rg1** リソース グループを表すエントリをクリックします。

1. リソース グループの**概要**ブレードで、リソース グループのリソース一覧から、新しく作成されたディスクを表すエントリを選択し、ツール バーの 「**移動**」 をクリックし、ドロップダウン リストで、「**別のリソース グループに移動**」 を選択します。

    >**注**: この方法により、複数のリソースを同時に移動できます。 

1. **リソースの移動**ブレードで、「**新しいグループの作成**」 をクリックします。

1. 「**リソース グループ**」 のテキスト ボックスに「**az104-03a-rg2**」と入力し、**移動したリソースに関連付けられているツールとスクリプトは、新しいリソース ID を使用するように更新するまで機能しないことを理解しました。** というチェックボックスを選択し、「**OK**」 をクリックします。

    >**注**: 移動が完了するのを待たず、代わりに次のタスクに進みます。移動には約 10 分かかります。ソースまたはターゲットのリソース グループのアクティビティ ログ エントリを監視することで、操作が完了したことを確認できます。次のタスクを完了したら、この手順を再び確認してください。

#### タスク 3: リソース ロックを実装してテストする

このタスクでは、ディスク リソースを含む Azure リソース グループにリソース ロックを適用します。

1. Azure portal で、「**ディスク**」を検索して選択し、「**+ 追加**」 をクリックして、次の設定を指定します。

    |設定|値|
    |---|---|
    |サブスクリプション| このラボで使用するサブスクリプションの名前 |
    |リソース グループ| 新しいリソース グループを **az104-03a-rg3** の名前で作成する |
    |ディスク名| **az104-03a-disk2** |
    |リージョン| このラボで他のリソース グループを作成した Azure リージョンの名前 |
    |可用性ゾーン| **なし** |
    |ソース タイプ| **なし** |

1. 記憶域の種類とサイズをそれぞれ **Standard HDD** と **32 GiB** に設定します。

1. 「**確認および作成**」 をクリックしてから、「**作成**」 をクリックします。

1. Azure ポータルで、「**リソース グループ**」 を検索して選択します。  

1. リソース グループの一覧で、**az104-03a-rg3** リソース グループを表すエントリをクリックします。

1. 「**az104-03a-rg3**」 リソース グループ ブレードで、「**ロック**」 をクリックし、 次の設定でロックを追加します。

    |設定|値|
    |---|---|
    |ロック名| **az104-03a-delete-lock** |
    |ロックの種類| **削除** |

1. **az104-03a-rg3** リソース グループ ブレードの、リソース グループ リソースの一覧で 「**概要**」 をクリックし、このタスクで前に作成したディスクを表すエントリを選択し、 ツール バーの 「**削除**」 をクリックします。 

1. 「**選択したリソースをすべて削除しますか?**」 というメッセージが表示されたら、「**削除の確認**」 テキスト ボックスに「**はい**」と入力し、「**削除**」 をクリックします。

1. 失敗した削除操作を通知するエラー メッセージが表示されます。 

    >**注**: エラー メッセージが表示される場合、これは、リソース グループ レベルに適用された削除ロックが原因であると予想されます。

1. **az104-03a-rg3** リソース グループのリソースの一覧に戻り、**az104-03a-disk2** リソースを表すエントリをクリックします。 

1. **az104-03a-disk2** ブレードの 「**設定**」 セクションで 「**Size + performance**」 をクリックし、ディスクのタイプとサイズを **Premium SSD** と **64 GiB** にそれぞれ設定し、変更を保存します。変更が成功したことを確認します。

    >**注**: リソース グループレベルのロックは削除操作にのみ適用されるため、これは予想されることです。 

#### リソースのクリーンアップ

   >**注**: この課題で展開したリソースは、このモジュールの次のラボで使用するため削除しないでください。このラボで作成したリソース ロックのみを削除してください。

1. **az104-03a-rg3** リソース グループ ブレードに移動し、「**ロック**」 ブレードを表示し、**削除**ロック エントリの右側にある 「**削除**」 リンクをクリックして **az104-03a-delete-lock** のロックを削除します。

#### レビュー

このラボでは次の内容を学習しました。

- リソース グループの作成およびリソース グループへのリソースのデプロイ
- リソース グループ間でのリソースの移動
- 実装およびテスト済みのリソース ロック
